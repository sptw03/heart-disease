<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>แบบประเมินความเสี่ยงโรคหลอดเลือดหัวใจ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600&display=swap');
      body {
        font-family: 'Prompt', sans-serif;
        background-color: #771a1a;
        margin: 0;
        padding: 0;
      }
      .container {
        background: #ffffff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 20px 25px rgba(0, 0, 0, 0.1);
      }
      h3 {
        margin-bottom: 20px;
        color: #811d1d;
        text-align: center;
      }
      .form-label {
        font-weight: 600;
        color: #000000;
      }
      #result {
        margin-top: 20px;
        color: #dd3030;
        text-align: center;
      }
      .icon {
        color: #aaafb9;
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container mt-3">
      <h3>แบบประเมินความเสี่ยงโรคหลอดเลือดหัวใจ</h3>
      <form id="riskForm">
        <div class="row justify-content-center">
          <div class="col-md-6">
        <label for="age" class="form-label"><i class="fas fa-user icon"></i>อายุ</label>
        <input type="number" class="form-control" placeholder="กรุณากรอกอายุ" name="age" id="age" required>

        <label for="gender" class="form-label"><i class="fas fa-venus-mars icon"></i>เพศ</label>
        <select class="form-select" name="gender" id="gender" required>
          <option value="" selected disabled>เลือกเพศ</option>
          <option value="ชาย">ชาย</option>
          <option value="หญิง">หญิง</option>
        </select>

        <label for="smoking" class="form-label"><i class="fas fa-smoking icon"></i>คุณสูบบุหรี่หรือไม่</label>
        <select class="form-select" name="smoking" id="smoking" required>
          <option value="" selected disabled>กรุณาเลือก</option>
          <option value="true">สูบ</option>
          <option value="false">ไม่สูบ</option>
        </select>

        <label for="hypertension" class="form-label"><i class="fas fa-tachometer-alt icon"></i>คุณมีความดันสูงหรือไม่</label>
        <select class="form-select" name="hypertension" id="hypertension" required>
          <option value="" selected disabled>กรุณาเลือก</option>
          <option value="true">ความดันสูง (>140/90)</option>
          <option value="false">ความดันปกติ (~120/80)</option>
        </select>

        <label for="waist_circumference" class="form-label"><i class="fas fa-tape icon"></i>รอบเอว (cm.)</label>
        <input type="number" class="form-control" placeholder="กรุณากรอกรอบเอว (cm.)" name="waist_circumference" id="waist_circumference" required>

        <label for="weight" class="form-label"><i class="fas fa-weight icon"></i>น้ำหนัก (kg)</label>
        <input type="number" class="form-control" placeholder="กรุณากรอกน้ำหนัก (kg)" name="weight" id="weight" required>

        <label for="height" class="form-label"><i class="fas fa-ruler-vertical icon"></i>ส่วนสูง (cm.)</label>
        <input type="number" class="form-control" placeholder="กรุณากรอกส่วนสูง (cm.)" name="height" id="height" required>

        <label for="exercise" class="form-label"><i class="fas fa-running icon"></i>คุณออกกำลังกายหรือไม่</label>
        <select class="form-select" name="exercise" id="exercise" required>
          <option value="" selected disabled>กรุณาเลือก</option>
          <option value="true">ออกกำลังกายปกติ</option>
          <option value="false">ไม่ออกกำลังกาย</option>
        </select>

        <label for="family_history" class="form-label"><i class="fas fa-users icon"></i>คุณมีประวัติคนในครอบครัวเป็นโรคหลอดเลือดหัวใจ</label>
        <select class="form-select" name="family_history" id="family_history" required>
          <option value="" selected disabled>กรุณาเลือก</option>
          <option value="true">มี</option>
          <option value="false">ไม่มี</option>
        </select>

        <label for="blood_sugar" class="form-label"><i class="fas fa-vial icon"></i>ระดับน้ำตาลในเลือด (mg/dL)</label>
        <input type="number" class="form-control" placeholder="กรุณากรอกระดับน้ำตาลในเลือด (mg/dL)" name="blood_sugar" id="blood_sugar" required>

        <label for="cholesterol" class="form-label"><i class="fas fa-vials icon"></i>ระดับคอเลสเตอรอล (mg/dL)</label>
        <input type="number" class="form-control" placeholder="กรุณากรอกคอเลสเตอรอล (mg/dL)" name="cholesterol" id="cholesterol" required>

        <label for="diet" class="form-label"><i class="fas fa-utensils icon"></i>คุณทานอาหารอย่างไร</label>
        <select class="form-select" name="diet" id="diet" required>
          <option value="" selected disabled>กรุณาเลือก</option>
          <option value="high_fat">ทานอาหารที่มีไขมันสูง</option>
          <option value="low_vegetables">ไม่ทานผักผลไม้</option>
          <option value="balanced">ทานอาหารครบ 5 หมู่</option>
        </select>

        <div class="col-md-12 text-center mt-4">
          <button type="button" class="btn btn-primary w-50" onclick="calculateRisk()">ประเมินความเสี่ยง</button>
        </div>
      </form>

      <div id="result" style="display: none;">
        <h4 id="riskPercentage"></h4>
        <p id="adviceText"></p>
      </div>
    </div>

    <script>
      function calculateRisk() {
        let score = 0;

        // รับค่าจากแบบฟอร์ม
        const age = parseInt(document.getElementById('age').value);
        const gender = document.getElementById('gender').value;
        const smoking = document.getElementById('smoking').value === 'true';
        const hypertension = document.getElementById('hypertension').value === 'true';
        const waist = parseFloat(document.getElementById('waist_circumference').value);
        const weight = parseFloat(document.getElementById('weight').value);
        const height = parseFloat(document.getElementById('height').value);
        const exercise = document.getElementById('exercise').value === 'false';
        const familyHistory = document.getElementById('family_history').value === 'true';
        const bloodSugar = parseFloat(document.getElementById('blood_sugar').value);
        const cholesterol = parseFloat(document.getElementById('cholesterol').value);
        const diet = document.getElementById('diet').value;

        // คำนวณ BMI
        const bmi = weight / ((height / 100) ** 2);

        // คำนวณคะแนนความเสี่ยง
        if (age >= 45) score += 10;
        if (gender === 'ชาย') score += 5;
        if (smoking) score += 20;
        if (hypertension) score += 15;
        if (waist > 90 && gender === 'ชาย' || waist > 80 && gender === 'หญิง') score += 10;
        if (bmi >= 30) score += 20;
        if (exercise) score += 10;
        if (familyHistory) score += 15;
        if (bloodSugar > 126) score += 20;
        else if (bloodSugar > 100) score += 10;
        if (cholesterol > 240) score += 20;
        else if (cholesterol > 200) score += 10;
        if (diet === 'high_fat') score += 10;
        else if (diet === 'low_vegetables') score += 5;

        // แสดงผลลัพธ์
        const resultDiv = document.getElementById('result');
        const riskPercentage = document.getElementById('riskPercentage');
        const adviceText = document.getElementById('adviceText');
        resultDiv.style.display = 'block';

        if (score > 50) {
          riskPercentage.innerText = 'ความเสี่ยงสูง!';
          adviceText.innerText = 'คุณควรปรึกษาแพทย์และดูแลสุขภาพอย่างจริงจัง';
        } else if (score > 30) {
          riskPercentage.innerText = 'ความเสี่ยงปานกลาง!';
          adviceText.innerText = 'คุณควรปรับพฤติกรรมสุขภาพและพบแพทย์หากจำเป็น';
        } else {
          riskPercentage.innerText = 'ความเสี่ยงต่ำ!';
          adviceText.innerText = 'คุณมีสุขภาพที่ดี ควรรักษาพฤติกรรมสุขภาพต่อไป';
        }
      }
    </script>
  </body>
</html>